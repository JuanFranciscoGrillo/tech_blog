{{!-- Extend the main layout --}}
{{#extend "main"}}

{{#content "body"}}
    <article>
        <h2>{{post.title}}</h2>
        <p>{{post.content}}</p>
        <p>Posted by {{post.User.username}} on {{format_date post.createdAt}}</p>
    </article>

    {{#if loggedIn}}
        <section>
            <h3>Leave a Comment:</h3>
            <form action="/api/comments" method="POST">
                <textarea name="commentText" placeholder="Your comment" required></textarea>
                <input type="hidden" name="postId" value="{{post.id}}">
                <button type="submit">Submit Comment</button>
            </form>
        </section>
    {{/if}}

    <section>
        <h3>Comments:</h3>
        {{#each post.Comments as |comment|}}
            <div class="comment">
                <p>{{comment.commentText}}</p>
                <p>Comment by {{comment.User.username}} on {{format_date comment.createdAt}}</p>
            </div>
        {{/each}}
    </section>
{{/content}}

{{/extend}}
